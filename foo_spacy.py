import spacy
import pprint
from itertools import product


from database_connector import *


# to download 'de' model: python -m spacy download de
#nlp = spacy.load('de')

nlp = spacy.load('de_core_news_sm')
#nlp.add_pipe(nlp.create_pipe('sentencizer'))
#print(nlp.vocab)

article1 = 'Berlin. Man darf sich keine Illusionen machen: Die neue italienische Übergangsregierung unter dem Wirtschaftsprofessor Carlo Cottarelli wird nicht lange halten. Im Herbst wird es Neuwahlen geben. Und bis dahin werden politische Krawallmacher den Ton angeben und das Land in eine Dauer-Kampagne stürzen. Die Anti-Establishment-Bewegung Fünf Sterne und die rechts außen angesiedelte Lega haben sich bereits auf Staatspräsident Sergio Mattarella eingeschossen. Der hatte den beiden Möchtegern-Koalitionsparteien den Wunschkandidaten für das Amt des Finanzministers vermasselt Paolo Savona sah Italien unter dem "Spar-Diktat" von Brüssel und Berlin. Die EU-Verträge müssten neu verhandelt werde. lautete seine Devise. Fünf Sterne und Lega sind nicht viel mehr als Anti-System-Parteien Fünf Sterne und Lega haben kein Programm. wie Italiens Wirtschaft wieder auf Touren kommt und der immens hohe Schuldenberg abgetragen werden kann. Beide sind in erster Linie Anti-System-Parteien. Sie wettern gegen Institutionen wie den Staatspräsidenten oder die EU. Das Bedauerliche is. dass diese Linie beim Wahlvolk zieh. zumal sie mit einer hemmungslosen Spendierhosen-Politik einhergeht. Es ist daher zu befürchte. dass Fünf Sterne und Lega im Herbst eine noch größere Mehrheit einfahren. Damit ist jedoch ein steiler Anstieg von Italiens Defizit programmiert. Das von beiden Parteien bereits versprochene Grundeinkommen in Höhe von 780 Euro sowie die Wiedereinführung von Frühverrentungen würden die staatlichen Ausgaben in die Höhe treiben. Spitzensteuersätze von 15 beziehungsweise 20 Prozent Flat Tax ließen dagegen die öffentlichen Einnahmen schrumpfen. Der Übergangs-Regierungschef Cottarelli hatte die Mehrkosten hierfür auf bis zu 126 Milliarden Euro pro Jahr beziffert. Das Gespenst einer überbordenden Verschuldun. das die Nerven der EU in der Griechenlandkrise über Gebühr strapaziert hatt. ist zurück. Italien steht bereits heute mit .3 Billionen Euro in der Kreide. Das entspricht 132 Prozent seiner Wirtschaftsleistung nach dem Maastricht-Vertrag sind gerade einmal 60 Prozent erlaubt. Fünf Sterne und Lega sehen Schuld an Italien Krise bei EU und Deutschland Fünf Sterne und Lega bieten eine fatale Mischung aus Freibier-Mentalität und Sündenbock-Reflexen. Schuld an der italienischen Misere haben demnach Brüssel und die Pfennigfuchser aus Berlin. Mit dieser verantwortungslosen Politik vergraulten beide Parteien bereits die Märkte. Die Zinsen für italienische Staatsanleihen kletterten nach oben. Ausgaben auf Pump werden also noch teurer. Eine gefährliche Entwicklun. denn Italien ist die drittgrößte Volkswirtschaft in der EU. Sollte eine neue Populisten-Regierung ihren Kurs durchpeitsche. würde sie einen Schuldenkollaps riskieren. Hinzu komm. dass die Banken des Landes noch viele Milliarden Euro an faulen Krediten in ihren Büchern haben bisher sprang ihnen der Staat im Notfall bei. Doch wenn die öffentliche Hand nicht mehr liquide is. richten sich die Blicke nach Brüssel. Italiens Dauerkrise belastet europäische Gemeinschaft Die EU-Mittel würden indessen nicht reichen. Schon heute benötigt Italien jedes Jahr rund 200 Milliarden Euro an frischen Darlehen. Der europäische Rettungsschirm ESM hat aber nur 400 Milliarden Euro frei verfügbar. Zu weni. um das Land langfristig zu stabilisieren. Die Dauerkrise in Rom belastet die europäische Gemeinschaft sie ist eine neue Lunte für die zerbrechliche Finanz-Stabilität. Mitten im Endspurt der Brexit-Verhandlungen wird die EU zurückgeworfen in einen lähmenden Grundsatzstreit: Wie viele Schulden sollten erlaubt werden? Wie streng sind die Regeln auszulegen? Man kann nur hoffe. dass Brüssel nicht einknickt. Das italienische Beispiel würde schnell Schule machen.'
nlp_text1 = nlp(article1)

plag_of_article1 = 'Italiens Dauerkrise belastet europäische Gemeinschaf. Doch wenn die öffentliche Hand nicht mehr liquide is. richten sich die Blicke nach Brüssel. Es ist daher zu befürchte. dass Fünf Sterne und Lega im Herbst eine noch größere Mehrheit einfahren. Berlin. Man darf sich keine Illusionen machen. Zu weni. um das Land langfristig zu stabilisieren. Und bis dahin werden politische Krawallmacher den Ton angeben und das Land in eine Dauer-Kampagne stürzen. Fünf Sterne und Lega bieten eine fatale Mischung aus Freibier-Mentalität und Sündenbock-Reflexen. Das italienische Beispiel würde schnell Schule machen. Man kann nur hoffe. dass Brüssel nicht einknickt. Der europäische Rettungsschirm ESM hat aber nur 400 Milliarden Euro frei verfügbar. Schon heute benötigt Italien jedes Jahr rund 200 Milliarden Euro an frischen Darlehen. Die neue italienische Übergangsregierung unter dem Wirtschaftsprofessor Carlo Cottarelli wird nicht lange halten. Mitten im Endspurt der Brexit-Verhandlungen wird die EU zurückgeworfen in einen lähmenden Grundsatzstreit. Im Herbst wird es Neuwahlen geben. Beide sind in erster Linie Anti-System-Parteien. Die Anti-Establishment-Bewegung Fünf Sterne und die rechts außen angesiedelte Lega haben sich bereits auf Staatspräsident Sergio Mattarella eingeschossen. Wie viele Schulden sollten erlaubt werden. Der hatte den beiden Möchtegern-Koalitionsparteien den Wunschkandidaten für das Amt des Finanzministers vermassel. Spitzensteuersätze von 15 beziehungsweise 20 Prozent Flat Tax ließen dagegen die öffentlichen Einnahmen schrumpfen. Fünf Sterne und Lega haben kein Programm. wie Italiens Wirtschaft wieder auf Touren kommt und der immens hohe Schuldenberg abgetragen werden kann. Wie streng sind die Regeln auszulegen. Fünf Sterne und Lega sehen Schuld an Italie. Paolo Savona sah Italien unter dem "Spar-Diktat" von Brüssel und Berlin. Eine gefährliche Entwicklun. denn Italien ist die drittgrößte Volkswirtschaft in der EU. Die EU-Verträge müssten neu verhandelt werde. lautete seine Devise. Fünf Sterne und Lega sind nicht viel mehr als Anti-System-Parteie. Schuld an der italienischen Misere haben demnach Brüssel und die Pfennigfuchser aus Berlin. Sie wettern gegen Institutionen wie den Staatspräsidenten oder die EU. Das Bedauerliche is. dass diese Linie beim Wahlvolk zieh. zumal sie mit einer hemmungslosen Spendierhosen-Politik einhergeht. Hinzu komm. dass die Banken des Landes noch viele Milliarden Euro an faulen Krediten in ihren Büchern haben bisher sprang ihnen der Staat im Notfall bei. Damit ist jedoch ein steiler Anstieg von Italiens Defizit programmiert. Krise bei EU und Deutschlan. Die Zinsen für italienische Staatsanleihen kletterten nach oben. Das entspricht 132 Prozent seiner Wirtschaftsleistung nach dem Maastricht-Vertra. Das von beiden Parteien bereits versprochene Grundeinkommen in Höhe von 780 Euro sowie die Wiedereinführung von Frühverrentungen würden die staatlichen Ausgaben in die Höhe treiben. Der Übergangs-Regierungschef Cottarelli hatte die Mehrkosten hierfür auf bis zu 126 Milliarden Euro pro Jahr beziffert. Das Gespenst einer überbordenden Verschuldun. das die Nerven der EU in der Griechenlandkrise über Gebühr strapaziert hatt. ist zurück. Mit dieser verantwortungslosen Politik vergraulten beide Parteien bereits die Märkte. Italien steht bereits heute mit .3 Billionen Euro in der Kreide. Die Dauerkrise in Rom belastet die europäische Gemeinschaft sie ist eine neue Lunte für die zerbrechliche Finanz-Stabilität. Die EU-Mittel würden indessen nicht reichen. Ausgaben auf Pump werden also noch teurer. sind gerade einmal 60 Prozent erlaubt. Sollte eine neue Populisten-Regierung ihren Kurs durchpeitsche. würde sie einen Schuldenkollaps riskieren.'
nlp_text2 = nlp(plag_of_article1)

print("nlp_text1.sim(nlp_text2): " )
print(nlp_text1.similarity(nlp_text2))

art3 = 'Berlin. Der Berliner Fußball-Zweitligist 1. FC Union steht nach Informationen des "Berliner Kurier" angeblich vor der Verpflichtung des neuen Trainers Nestor El Maestro. Der serbisch-stämmige Engländer, schon Assistenztrainer unter Mirko Slomka bei Schalke 04, trainierte zuletzt Spartak Trnava, das in der Slowakei erstmals seit 1973 - damals noch in der Tschechoslowakei - wieder den Titel gewann. Dort verabschiedete sich El Maestro vor neun Tagen, und die Internetplattform webnoviny.sk zitierte den 35-Jährigen mit dem klangvollen Künstlernamen: "Wenn wir auf meine berufliche Geschichte schauen, ist der logische Schritt die österreichische Liga oder die deutsche Liga. Wir sprechen eigentlich von der deutschen zweiten Bundesliga. Aber das ist ein ausgezeichneter Wettbewerb, es wäre sehr interessant für mich". El Maestro, gebürtig unter dem Namen Jevtic, würde André Hofschneider ersetzen, der nach Saisonende seinen Posten bei den Köpenickern verloren hatte. Tags zuvor war bekannt geworden, dass Union langjährige Profis mit klangvollen Namen verliert: Torjäger Steven Skrzybski unterschrieb beim Bundesligisten Schalke 04. Linksverteidiger Kristian Pedersen aus Dänemark steht nach Informationen von "Ekstra Bladet" vor dem Wechsel zum englischen Zweitligisten Birmingham City.'
no_plag_of_art3 = 'Berlin. Seit Kurzem kommen die Schläger auch im Schlaf zu Justin. Gestern Nacht ist es wieder passiert: Jessica Wichert hörte ihren Sohn weinen, hörte, wie der Achtjährige immer wieder nach "Mama, Mama" rief und schrie: "Die lassen mich nicht in Ruhe. Die schlagen mich." Als die Mutter das Kinderzimmer betrat, in dem eine Wand hellgrün ist und ein Traumfänger von der Decke baumelt, da saß ihr Sohn aufrecht im Bett. Er war nicht zu trösten. Zehn, 15 Minuten ging das so. So erzählt es Wichert. Dann fiel Justin in einen erschöpften, traumlosen Schlaf. Justin und Jessica Wichert heißen eigentlich anders. Die Mutter alleinerziehend, die kurzen Haare rot gefärbt, die Schultern breit will die echten Namen nicht in der Zeitung lesen. Justin, ein stämmiger Junge mit Brille und schüchternem Lächeln, wird in der Schule geprügelt. Seit über zwei Jahren geht das so, erzählt Wichert. Blaue Flecken, Kratzer, rote Striemen. Jessica Wichert sagt: "Es geht nicht mehr." Gewalt an Schulen. Kein neues Phänomen. Aber neue Zahlen zeigen: Im Umfeld von Berliner Schulen sind im vergangenen Schuljahr deutlich mehr Straftaten registriert worden als in den Jahren zuvor. Im Schuljahr 20162017 zählte die Polizei 5438 Straftaten. Bedrohungen, Körperverletzungen, Drogen. Das sind 207 mehr Vorfälle als im Schuljahr zuvor. Befeuert wurde die Gewaltdiskussion auch durch eine Parlamentsanfrage an die Senatsinnenverwaltung. Aus der Antwort geht hervor: Nach dem Bezirk Mitte wurde die Polizei am meisten in Marzahn-Hellersdorf zu Schulen gerufen. 582-mal im vergangenen Schuljahr. Brandbrief: "Kinder haben Angst, in die Schule zu gehen" Familie Wichert wohnt in Hellersdorf. Wegen einer Krankheit kann Jessica Wichert nicht mehr als Druckfachfrau arbeiten. Sie leben von Hartz IV und dem Unterhalt für Justin. Seine Schule galt lange als Problemschule: die Wolfgang-Amadeus-Mozart-Schule. Im letzten Bericht der Schulinspektion zur Gesamtschule er stammt von 2016 heißt es: Bereits in der ersten und zweiten Klasse fallen "einige Kinder durch Fäkalsprache und Distanzlosigkeit gegenüber dem pädagogischen Personal" auf. Zur dritten Klasse: Kinder ignorierten die Anweisungen der Lehrer. Von Schülern ist dort zu lesen, die einfach den Unterricht verlassen, von Türen, die knallen, Tischen und Stühlen, die umgeworfen werden. Fehlquote im Schuljahr 20162017: 13,2 Prozent. Das ist fast doppelt so viel wie im Berliner Durchschnitt. Doch dann passierte etwas. Eltern schrieben einen Brandbrief. "Die Kinder haben Angst davor, in die Schule zu gehen", stand dort. Die Schulleitung wechselte, neue Lehrer kamen, Sozialarbeiter. Beate Stoffers, Sprecherin der Senatsschulverwaltung, sagt: "Die Situation hat sich stark verbessert." Der Bezirkselternvertreter Norman Heise bestätigt das. Die neue Schulleiterin habe endlich Gewaltpräventionskonzepte angewandt, die ihr Vorgänger in der Schublade ließ. Justins Mutter sagt über ihn: "Er ist ein leichtes Opfer" Stoffers sagt, jetzt gebe es Notfallpläne, klare Zuständigkeiten. Die aktuellen Zahlen bestätigen diese Entwicklung. Fasst man die Jahre 2014 bis 2017 zusammen, gab es an der Mozart-Schule 176 angezeigte Straftaten. Das ist einer der höchsten Werte in Berlin. 2017 hat sich die Lage deutlich beruhigt: 17 Strafanzeigen wurden gezählt. Justins Mutter wusste von dieser Vorgeschichte nichts. Entscheidend war der kurze Schulweg über einen Fußweg im Grünen. Ideal. Eigentlich. "Es ging schon zwei oder drei Monate nach der Einschulung los", sagt Jessica Wichert. Justin wurde aggressiv gegenüber seiner Mutter, schrie sie an, schimpfte, schlug. Erst später begriff sie: Ihr Sohn wird auf dem Pausenhof getreten und gehänselt. "Er ist anders als die anderen", sagt Justins Oma. Seine Tante Sandy: "Er zieht sich schnell zurück, wenn etwas schiefläuft." Seine Mutter Jessica sagt: "Er ist ein leichtes Opfer." Justin spielt am liebsten "Fortnite" auf der Playstation. Das Spiel ist freigegeben ab zwölf Jahren. Die letzten Überlebenden kämpfen gegen die Zombieapokalypse. Was Justin daran mag? "Ich kann den anderen die Waffen wegnehmen", sagt er. In letzter Zeit fragt er seine Tante Sandy immer wieder, ob sie ihn von der Schule abholt. "Mein Freund haut mich immer, wenn wir zusammen laufen", sagt Justin. Hilfsprogramme gegen Mobbing sind vielen Eltern unbekannt Jessica Wichert sagt, sie sei drei-, viermal bei der Klassenlehrerin gewesen. Habe immer wieder gehört: "Wir lösen das Problem." Oder: "Wir kümmern uns darum. Es ist schon viel besser." Geändert habe sich nichts. Die Schulleitung will noch nichts zu dem Fall sagen. Denn sie hat erst gestern davon erfahren. Die Schulsenatsverwaltung gibt sich bestürzt, wie am Tag zuvor schon über die Kriminalitätszahlen zu den Schulen. Senatorin Sandra Scheeres SPD sagt: "Jeder Mobbingfall muss aufgearbeitet werden. Dazu müssen die Zuständigen aber wissen, dass Mobbing stattgefunden hat." Die Senatsverwaltung empfiehlt bei Gewaltvorfällen: sofort das Gespräch mit der Schulleitung suchen. Der nächste Schritt: Schulaufsicht. Dann die Antidiskriminierungsbeauftragte. Die Geschichte von Justin zeigt aber: Die besten Hilfsprogramme helfen nichts, wenn Eltern wie Jessica Wichert nichts von ihnen wissen. "Ich habe zu lange einfach zugesehen", sagt Jessica Wichert. Gestern hat sie zum ersten Mal mit der Schulleiterin gesprochen. Sie will ihren Sohn auf eine andere Schule schicken.'

print("nlp 3 .sim(nlp 4 ): " )
print(nlp(art3).similarity(nlp(no_plag_of_art3)))

sentences1 = nlp(art3).sents
sentences2 = nlp(no_plag_of_art3).sents

'''while True:
    for o, sentence1 in enumerate(sentences1):
#for sentence1 in sentences1:
    # sentence = nlp(sentence)

        for i, sentence2 in enumerate(sentences2):
            print(o, i)
            print(sentence1.similarity(sentence2))'''
index = 0
for sen1, sen2 in product(sentences1, sentences2):
    print(index)
    sim = sen1.similarity(sen2)
    if sim > 0.9:
        print('!!!!!!!!!!!!!')
    print(sim)
    print(sen1)
    print(sen2)
    index = index +1
    #print("file-{0}-loop-{1}".format(md, pico))


'''mongo_articles = get_articles_from_mongo_db()
article1 = mongo_articles.find_one({
        'url': 'https://www.morgenpost.de/berlin/article214320865/Berlin-laesst-sein-Bauland-ungenutzt-liegen.html'
    })
pprint.pprint(article1)
nlp_text1 = nlp(article1.get('text'))


article2 = mongo_articles.find_one({
        'url': 'https://www.morgenpost.de/berlin/article214384099/AfD-Demo-in-Berlin-Das-ist-die-Route-der-Populisten.html'
    })
#pprint.pprint(article2)
nlp_text2 = nlp(article2.get('text'))'''
